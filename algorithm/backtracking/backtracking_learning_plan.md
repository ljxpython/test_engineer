# 回溯算法系统学习计划（从理论到实践）

目标：从零掌握回溯算法，建立通用模板，熟悉剪枝与去重技巧，能独立解决经典题型并进行复杂度分析。

建议语言：Python（也适用于其他语言）
预计时长：2–3 周（总计 20–30 小时，可按阶段调整）
代码建议目录：`algorithm/backtracking/`（本计划文件位于此目录）

---

## 阶段 0：递归与调用栈（铺垫）
- 要点：递归终止条件、决策树、时间/空间复杂度。
- 练习：斐波那契（递归/迭代）、二叉树最大深度。
- 验收：能解释调用栈的展开与回收。

## 阶段 1：回溯三要素与模板
- 三要素：路径、选择列表、结束条件。
- 模板（做选择 → 递归 → 撤销选择）：
```python
result = []

def backtrack(path, choices):
    if 满足结束条件(path):
        result.append(path[:])
        return
    for choice in 可迭代的choices:
        if 剪枝条件(choice, path):
            continue
        path.append(choice)        # 做选择
        backtrack(path, 更新后的choices)  # 递归
        path.pop()                 # 撤销选择（状态恢复）
```
- 产出：模板代码与注释。

## 阶段 2：排列类（基础）
- 要点：位置-选择关系，visited 标记；含重复要排序+同层去重。
- 题目：
  - 全排列（LeetCode 46）
  - 全排列 II（LeetCode 47）

## 阶段 3：组合类（基础）
- 要点：组合不强调顺序，起始下标控制范围；剪枝在累计和超界时返回。
- 题目：
  - 组合（选 k 个，LeetCode 77）
  - 组合总和（LeetCode 39）
  - 组合总和 II（LeetCode 40）

## 阶段 4：子集类（进阶去重）
- 要点：逐层“选/不选”；含重复同层去重（排序后跳过相同兄弟）。
- 题目：
  - 子集（LeetCode 78）
  - 子集 II（LeetCode 90）

## 阶段 5：括号与字符串回溯
- 要点：合法性剪枝（括号配对、回文预处理、IP 段合法）。
- 题目：
  - 括号生成（LeetCode 22）
  - 分割回文串（LeetCode 131）
  - 复原 IP 地址（LeetCode 93）

## 阶段 6：棋盘类（强剪枝）
- 要点：列/对角线占用标记；选择约束最强的位置优先。
- 题目：
  - N 皇后（LeetCode 51/52）
  - 数独求解（LeetCode 37）

## 阶段 7：路径搜索（网格/图）
- 要点：访问标记与回退；边界与阻塞剪枝。
- 题目：
  - 单词搜索（LeetCode 79）
  - 迷宫/路径类（参考：LeetCode 490 The Maze、200 岛屿数量、130 被围绕的区域）

## 阶段 8：系统化剪枝与性能优化
- 方法：排序（去重/界限）、上界/下界估计、选择顺序优化、预计算（如回文表）。
- 对比：为阶段 3/6 的题写“带/不带剪枝”版本比较运行时间。

## 阶段 9：复杂度分析与套路总结
- 数量级：排列 O(n!)、子集/组合 O(2^n)。
- 空间：递归深度 + 辅助结构。
- 套路：定位三要素 → 明确合法性 → 设计剪枝 → 保证状态恢复。

## 阶段 10：综合实战与复盘
- 选 3–5 个跨类型题（39/40、51/52、37、79、131），90 分钟内完成并记录思路与踩坑。
- 复盘维度：建模、剪枝有效性、代码整洁度、测试覆盖。

---

## 代码组织与测试建议
- 目录：`algorithm/backtracking/` 下按题目命名文件，文件头标注题号与链接。
- 自测模板：
```python
if __name__ == '__main__':
    # 基本自测用例
    print('OK')
```

## 常见坑位清单
- 忘记撤销选择导致状态污染；
- 去重写成跨层去重（应为同层）；
- 剪枝条件过保守或过激；
- 终止条件不完整或位置错误；
- 选择列表更新与恢复不一致。

## 实践里程碑
1. 模板巩固（阶段 1）→ 能写出 46 全排列。
2. 去重与剪枝（阶段 2–3）→ AC 40 组合总和 II。
3. 子集与字符串（阶段 4–5）→ AC 131 回文分割。
4. 棋盘类（阶段 6）→ AC 51/52、37。
5. 网格/图（阶段 7）→ AC 79。
6. 总结与复盘（阶段 8–10）→ 完成速查与对比实验。